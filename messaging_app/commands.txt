# Commands used to install and configure Nginx Ingress

## 1. Install Nginx Ingress Controller
```bash
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.2/deploy/static/provider/baremetal/deploy.yaml
```

## 2. Wait for Ingress Controller to be ready
```bash
kubectl wait --namespace ingress-nginx \
  --for=condition=ready pod \
  --selector=app.kubernetes.io/component=controller \
  --timeout=120s
```

## 3. Verify Ingress Controller installation
```bash
kubectl get pods -n ingress-nginx
kubectl get services -n ingress-nginx
```

## 4. Apply the Ingress configuration
```bash
kubectl apply -f ingress.yaml
```

## 5. Verify Ingress resource
```bash
kubectl get ingress
kubectl describe ingress django-messaging-ingress
```

## 6. Get Ingress Controller service details
```bash
kubectl get svc -n ingress-nginx
```

## 7. Test the Ingress (local setup)
```bash
# Add to /etc/hosts for local testing
echo "127.0.0.1 messaging-app.local api.messaging-app.local" | sudo tee -a /etc/hosts

# Test different paths
curl -H "Host: messaging-app.local" http://localhost:30080/
curl -H "Host: api.messaging-app.local" http://localhost:30080/
curl http://localhost:30080/api/
curl http://localhost:30080/admin/
```

## 8. Monitor Ingress logs
```bash
kubectl logs -n ingress-nginx deployment/ingress-nginx-controller -f
```